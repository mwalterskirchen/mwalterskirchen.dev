---
import type { ArticleFrontmatter } from "../../lib/types";
import { getConfigurationCollection } from "../../lib/utils";
import ArticleSnippet from "../ArticleSnippet.astro";
import Anchor from "../common/Anchor.astro";

type Props = {
  featuredArticles: Array<ArticleFrontmatter>;
};

const { featuredArticles } = Astro.props;
const { data: config } = await getConfigurationCollection();
---

<div class="flex w-full items-center justify-between">
  <h3 class="font-display text-lg leading-loose sm:text-xl">
    {config.texts.articlesName}
  </h3>
  <Anchor url="/blog" class="text-base">{config.texts.viewAll}</Anchor>
</div>
<ul class="my-8">
  {
    (featuredArticles.length === 0 && <p>{config.texts.noArticles}</p>) ||
      featuredArticles.map((article, index) => (
        <li
          class:list={[
            "animate-in-up",
            index % 9 === 0 && "delay-0",
            index % 9 === 1 && "delay-1",
            index % 9 === 2 && "delay-2",
            index % 9 === 3 && "delay-3",
            index % 9 === 4 && "delay-4",
            index % 9 === 5 && "delay-5",
            index % 9 === 6 && "delay-6",
            index % 9 === 7 && "delay-7",
            index % 9 === 8 && "delay-8",
          ]}
        >
          <ArticleSnippet
            title={article.title}
            description={article.description}
            url={article.url}
            timestamp={article.timestamp}
            duration={`${article.readTime} min`}
          />
        </li>
      ))
  }
</ul>
