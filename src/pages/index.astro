---
import Layout from "../layouts/Layout.astro";
import Hero from "../components/home/Hero.astro";
import About from "../components/home/About.astro";
import Section from "../components/common/Section.astro";
import FeaturedArticles from "../components/home/FeaturedArticles.astro";
import SEO from "../components/SEO.astro";
import { getCollection } from "astro:content";

const featuredArticles = (
  await getCollection("blog", (e) => e.data.featured)
).map((e) => ({
  ...e.data,
  url: `/blog/${e.data.slug}`,
}));

const canonicalUrl = new URL(Astro.url.pathname, Astro.site).href;
---

<Layout>
  <Fragment slot="head">
    <SEO
      title="Maximilian Walterskirchen"
      description="Senior Software Engineer based in Zurich. Building AI-powered products with TypeScript."
      longDescription="Senior Software Engineer based in Zurich. Building AI-powered products with TypeScript."
      cardImage="/avatar.jpeg"
      keywords={["software engineer", "AI", "LLM", "typescript", "web development"]}
      canonicalUrl={canonicalUrl}
    />
  </Fragment>
  <Section class="mt-8">
    <Hero />
  </Section>
  <Section>
    <About />
  </Section>
  <Section>
    <FeaturedArticles featuredArticles={featuredArticles} />
  </Section>
</Layout>
