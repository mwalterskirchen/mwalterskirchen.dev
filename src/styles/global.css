@import "tailwindcss";
@plugin "@tailwindcss/typography";

@variant dark (&:where(.dark, .dark *));

@theme {
  --font-mono: "IBM Plex Mono", ui-monospace, monospace;
  --font-display: "Press Start 2P", ui-monospace, monospace;
  --font-serif: "Literata Variable", serif;
  --color-zag-dark: var(--color-neutral-900);
  --color-zag-dark-opaque: oklch(from var(--color-neutral-900) l c h / 0.5);
  --color-zag-light: var(--color-neutral-100);
  --color-zag-light-opaque: oklch(from var(--color-neutral-100) l c h / 0.5);
  --color-zag-dark-muted: var(--color-neutral-600);
  --color-zag-light-muted: var(--color-neutral-400);
  --color-zag-accent-light: var(--color-emerald-400);
  --color-zag-accent-light-muted: var(--color-emerald-300);
  --color-zag-accent-dark: var(--color-emerald-600);
  --color-zag-accent-dark-muted: var(--color-emerald-800);
}

@layer base {
  :root {
    --zag-stroke: 2px;
    --zag-offset: 6px;
    --zag-transition-duration: 0.15s;
    --zag-transition-timing-function: ease-in-out;
  }

  ::selection {
    background-color: var(--color-zag-accent-light);
    color: var(--color-zag-dark-muted);
  }

  .zag-transition {
    @media (prefers-reduced-motion: no-preference) {
      transition:
        background-color var(--zag-transition-duration)
          var(--zag-transition-timing-function),
        color var(--zag-transition-duration)
          var(--zag-transition-timing-function),
        fill var(--zag-transition-duration)
          var(--zag-transition-timing-function),
        border-color var(--zag-transition-duration)
          var(--zag-transition-timing-function),
        transform var(--zag-transition-duration)
          var(--zag-transition-timing-function);
    }
  }

  .zag-bg {
    background-color: var(--color-zag-light);
    :where(.dark, .dark *) & {
      background-color: var(--color-zag-dark);
    }
  }

  .-zag-bg {
    background-color: var(--color-zag-dark);
    :where(.dark, .dark *) & {
      background-color: var(--color-zag-light);
    }
  }

  .zag-text {
    color: var(--color-zag-dark);
    :where(.dark, .dark *) & {
      color: var(--color-zag-light);
    }
  }

  .-zag-text {
    color: var(--color-zag-light);
    :where(.dark, .dark *) & {
      color: var(--color-zag-dark);
    }
  }

  .zag-muted {
    color: var(--color-zag-dark-muted);
    :where(.dark, .dark *) & {
      color: var(--color-zag-light-muted);
    }
  }

  .zag-fill {
    fill: var(--color-zag-dark);
    &:where(.dark, .dark *) {
      fill: var(--color-zag-light);
    }
  }

  .zag-text-muted {
    color: var(--color-zag-dark-muted);
    &:where(.dark, .dark *) {
      color: var(--color-zag-light-muted);
    }
  }

  .zag-border-b {
    border-bottom: var(--zag-stroke) solid;
    border-color: var(--color-zag-dark);
    &:where(.dark, .dark *) {
      border-color: var(--color-zag-light);
    }
  }

  .zag-offset {
    text-underline-offset: var(--zag-offset);
  }

  .hover-zag-dotted-grid:hover::before {
    --dot-bg: var(--color-zag-light);
    --dot-color: var(--color-zag-dark-muted);
    --dot-size: 1.5px;
    --dot-space: 16px;
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: block;
    z-index: -1;
    background:
      linear-gradient(
          90deg,
          var(--dot-bg) calc(var(--dot-space) - var(--dot-size)),
          transparent 1%
        )
        bottom right / var(--dot-space) var(--dot-space),
      linear-gradient(
          var(--dot-bg) calc(var(--dot-space) - var(--dot-size)),
          transparent 1%
        )
        bottom right / var(--dot-space) var(--dot-space),
      var(--dot-color);
    pointer-events: none;
  }

  :where(.dark, .dark *) .hover-zag-dotted-grid:hover::before {
    --dot-bg: var(--color-zag-dark);
    --dot-color: var(--color-zag-light-muted);
  }

  .hover-zag-dotted-grid:hover::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: block;
    z-index: -1;
    background: linear-gradient(
      159deg,
      var(--color-zag-light) 0%,
      var(--color-zag-light) 50%,
      var(--color-zag-light-opaque) 100%
    );
    pointer-events: none;
  }

  :where(.dark, .dark *) .hover-zag-dotted-grid:hover::after {
    background: linear-gradient(
      159deg,
      var(--color-zag-dark) 0%,
      var(--color-zag-dark) 50%,
      var(--color-zag-dark-opaque) 100%
    );
  }

  .opsz {
    font-variation-settings: "opsz" 72;
  }
}

@layer utilities {
  @media (prefers-reduced-motion: no-preference) {
    @keyframes fade-in {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes fade-in-up {
      from {
        opacity: 0;
        transform: translateY(8px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-in {
      animation: fade-in 600ms cubic-bezier(0.22, 1, 0.36, 1) both;
    }

    .animate-in-up {
      animation: fade-in-up 650ms cubic-bezier(0.22, 1, 0.36, 1) both;
    }

    .delay-0 { animation-delay: 0ms; }
    .delay-1 { animation-delay: 60ms; }
    .delay-2 { animation-delay: 120ms; }
    .delay-3 { animation-delay: 180ms; }
    .delay-4 { animation-delay: 240ms; }
    .delay-5 { animation-delay: 300ms; }
    .delay-6 { animation-delay: 360ms; }
    .delay-7 { animation-delay: 420ms; }
    .delay-8 { animation-delay: 480ms; }
  }
}

@utility tag {
  background-color: var(--color-zag-dark);
  :where(.dark, .dark *) & {
    background-color: var(--color-zag-light);
  }
  color: var(--color-zag-light);
    :where(.dark, .dark *) & {
      color: var(--color-zag-dark);
  }
  @media (prefers-reduced-motion: no-preference) {
    transition:
      background-color var(--zag-transition-duration)
        var(--zag-transition-timing-function),
      color var(--zag-transition-duration)
        var(--zag-transition-timing-function),
      fill var(--zag-transition-duration)
        var(--zag-transition-timing-function),
      border-color var(--zag-transition-duration)
        var(--zag-transition-timing-function),
      transform var(--zag-transition-duration)
        var(--zag-transition-timing-function);
  }
  @apply px-2 py-1 text-sm font-semibold;
}
